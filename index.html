<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Order, create and store reports from R.  By defining a
    lightweight interface around the inputs and outputs of an
    analysis, a lot of the repetitive work for reproducible research
    can be automated.  We define a simple format for organising and
    describing work that facilitates collaborative reproducible
    research and acknowledges that all analyses are run multiple
    times over their lifespans.">
<title>Lightweight Reproducible Reporting • orderly</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Lightweight Reproducible Reporting">
<meta property="og:description" content="Order, create and store reports from R.  By defining a
    lightweight interface around the inputs and outputs of an
    analysis, a lot of the repetitive work for reproducible research
    can be automated.  We define a simple format for organising and
    describing work that facilitates collaborative reproducible
    research and acknowledges that all analyses are run multiple
    times over their lifespans.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">orderly</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.6.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="articles/orderly.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="articles/bundles.html">orderly bundles</a>
    <a class="dropdown-item" href="articles/changelog.html">orderly changelog</a>
    <a class="dropdown-item" href="articles/patterns.html">orderly patterns</a>
    <a class="dropdown-item" href="articles/remote.html">orderly remotes</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/vimc/orderly/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="orderly">orderly<a class="anchor" aria-label="anchor" href="#orderly"></a>
</h1></div>
<!-- badges: start -->
<blockquote><ol style="list-style-type: decimal">
<li>an attendant in a hospital responsible for the non-medical care of patients and the maintenance of order and cleanliness.</li>
<li>a soldier who carries orders or performs minor tasks for an officer.</li>
</ol></blockquote>
<p><code>orderly</code> is a package designed to help make analysis more reproducible. Its principal aim is to automate a series of basic steps in the process of writing analyses, making it easy to:</p>
<ul>
<li>track all inputs into an analysis (packages, code, and data resources)</li>
<li>store multiple versions of an analysis where it is repeated</li>
<li>track outputs of an analysis</li>
<li>create analyses that depend on the outputs of previous analyses</li>
</ul>
<p>With <code>orderly</code> we have two main hopes:</p>
<ul>
<li>analysts can write code that will straightforwardly run on someone else’s machine (or a remote machine)</li>
<li>when an analysis that is run several times starts behaving differently it will be easy to see when the outputs started changing, and what inputs started changing at the same time</li>
</ul>
<p><code>orderly</code> requires a few conventions around organisation of a project, and after that tries to keep out of your way. However, these requirements are designed to make collaborative development with git easier by minimising conflicts and making backup easier by using an append-only storage system.</p>
<div class="section level3">
<h3 id="the-problem">The problem<a class="anchor" aria-label="anchor" href="#the-problem"></a>
</h3>
<p>One often-touted goal of R over point-and-click analyses packages is that if an analysis is scripted it is more reproducible. However, essentially all analyses depend on external resources - packages, data, code, and R itself; any change in these external resources might change the results. Preventing such changes in external resources is not always possible, but <em>tracking</em> changes should be straightforward - all we need to know is what is being used.</p>
<p>For example, while reproducible research <a href="https://cran.r-project.org/view=ReproducibleResearch" class="external-link">has become synonymous with literate programming</a> this approach often increases the number of external resources. A typical <a href="https://cran.r-project.org/package=knitr" class="external-link"><code>knitr</code></a> document will depend on:</p>
<ul>
<li>the source file (<code>.Rmd</code> or <code>.Rnw</code>)</li>
<li>templates used for styling</li>
<li>data that is read in for the analysis</li>
<li>code that is directly read in with <code>source</code>
</li>
</ul>
<p>The <code>orderly</code> package helps by</p>
<ul>
<li>collecting external resources before an analysis</li>
<li>ensuring that all required external resources are identified</li>
<li>removing any manual work in tracking information about these external resources</li>
<li>allowing running reports multiple times and making it easy to see what changed and why</li>
</ul>
<p>The core problem is that analyses have no general <em>interface</em>. Consider in contrast the role that functions take in programming. All functions have a set of arguments (inputs) and a return value (outputs). With <code>orderly</code>, we borrow this idea, and each piece of analysis will require that the user describes what is needed and what will be produced.</p>
</div>
<div class="section level3">
<h3 id="the-process">The process<a class="anchor" aria-label="anchor" href="#the-process"></a>
</h3>
<p>The user describes the inputs of their analysis, including:</p>
<ul>
<li>SQL queries (if using databases)</li>
<li>Required R sources</li>
<li>External resource files (e.g., csv data files, Rmd files, templates)</li>
<li>Packages required to run the analysis</li>
<li>Dependencies on previously run analyses</li>
</ul>
<p>The user also provides a list of “artefacts” (file-based results) that they will produce.</p>
<p>Then <code>orderly</code>:</p>
<ol style="list-style-type: decimal">
<li>creates a new empty directory</li>
<li>copies over <em>only</em> the declared file resources</li>
<li>loads only the declared packages</li>
<li>loads the declared R sources</li>
<li>evaluates any sql queries to create R objects</li>
<li>then runs the analysis</li>
<li>verifies that the declared artefacts are produced</li>
</ol>
<p>It then stores metadata alongside the analysis including hashes of all inputs and outputs, copies of data extracted from the database, a record of all R packages loaded at the end of the session, and (if using git) information about the git state (hash, branch and status).</p>
<p>Then if one of the dependencies of a report changes (the used data, code, etc), we have metadata that can be queried to identify the likely source of the change.</p>
</div>
<div class="section level2">
<h2 id="workflows-with-orderly">Workflows with <code>orderly</code>
<a class="anchor" aria-label="anchor" href="#workflows-with-orderly"></a>
</h2>
<p>In the <a href="https://www.imperial.ac.uk/mrc-global-infectious-disease-analysis" class="external-link">MRC Centre for Global Infectious Disease Analysis</a> we use <code>orderly</code> on three major projects:</p>
<ul>
<li>The <a href="https://www.vaccineimpact.org/" class="external-link">Vaccine Impact Modelling Consortium</a>
</li>
<li>Our part of the response to the 2018-2020 Ebola outbreak in the Democratic Republic of Congo</li>
<li>
<a href="https://www.imperial.ac.uk/mrc-global-infectious-disease-analysis/covid-19/" class="external-link">Our part</a> of the response to the 2019-2020 2019-nCoV-SARS/COVID-19 pandemic</li>
</ul>
<p>The workflows we have developed here are oriented towards collaborative groups of researchers - other workflows are possible (indeed <code>orderly</code> is also designed to support a <em>decentralised</em> workflow, though this has not been used in practice yet).</p>
<p>In these projects we have a group of researchers who develop and test analyses locally. These are developed on a <a href="https://git-scm.com/book/en/v2/Git-Branching-Basic-Branching-and-Merging" class="external-link">branch in git</a> and then run on a centralised <em>staging environment</em> (a duplicate of our production environment). The code and outputs are reviewed with the help of <a href="https://help.github.com/en/articles/about-pull-requests" class="external-link">GitHub’s “Pull requests”</a> and then the reports are run on our production environment.</p>
<p>Interaction with the remote environments is achieved using an <a href="https://github.com/vimc/montagu-reporting-api" class="external-link">HTTP API</a> which <code>orderly</code> itself transparently uses, so that reports can be run remotely, <a href="https://www.vaccineimpact.org/orderly/reference/orderly_run_remote.html">directly from R</a>. The remote systems also include an interactive web interface that can be used to explore and download versions of analyses, as well as run new ones.</p>
</div>
<div class="section level2">
<h2 id="internal-database-schema">Internal database schema<a class="anchor" aria-label="anchor" href="#internal-database-schema"></a>
</h2>
<p><code>orderly</code> has a database, which should be the preferred way of querying the report archive from other programs. The schema is programmatically described at <a href="inst/database/schema.yml"><code>inst/database/schema.yml</code></a> and automatically generated database documentation is available <a href="https://www.vaccineimpact.org/orderly/schema/">here</a>.</p>
</div>
<div class="section level2">
<h2 id="testing">Testing<a class="anchor" aria-label="anchor" href="#testing"></a>
</h2>
<p>There is a set of regression tests that require the reference data. Enable these by running the script <code>./scripts/copy_reference</code> which creates data in <code>tests/testthat/reference</code></p>
</div>
<div class="section level2">
<h2 id="rstudio-addins">RStudio addins<a class="anchor" aria-label="anchor" href="#rstudio-addins"></a>
</h2>
<p>There are <a href="https://github.com/vimc/orderly.rstudio" class="external-link">addins</a> available to help with development workflows.</p>
<p>See docs at <a href="https://github.com/vimc/orderly.rstudio#setup" class="external-link">orderly.rstudio</a> for setup and usage instructions.</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>Install <code>orderly</code> from CRAN with</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"orderly"</span><span class="op">)</span></span></code></pre></div>
<p>To install our internally released version (which might be ahead of CRAN) via drat, use</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("drat")</span></span>
<span><span class="fu">drat</span><span class="fu">:::</span><span class="fu">add</span><span class="op">(</span><span class="st">"vimc"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"orderly"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="license">License<a class="anchor" aria-label="anchor" href="#license"></a>
</h2>
<p>MIT © Imperial College of Science, Technology and Medicine</p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=orderly" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/vimc/orderly/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/vimc/orderly/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing orderly</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Rich FitzJohn <br><small class="roles"> Author, maintainer </small>  </li>
<li>Robert Ashton <br><small class="roles"> Author </small>  </li>
<li>Alex Hill <br><small class="roles"> Author </small>  </li>
<li>Martin Eden <br><small class="roles"> Author </small>  </li>
<li>Wes Hinsley <br><small class="roles"> Author </small>  </li>
<li>Emma Russell <br><small class="roles"> Author </small>  </li>
<li>James Thompson <br><small class="roles"> Author </small>  </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://www.repostatus.org/#active" class="external-link"><img src="https://www.repostatus.org/badges/latest/active.svg" alt="Project Status: Active – The project has reached a stable, usable state and is being actively developed."></a></li>
<li><a href="https://github.com/vimc/orderly/actions" class="external-link"><img src="https://github.com/vimc/orderly/workflows/R-CMD-check/badge.svg" alt="R build status"></a></li>
<li><a href="https://buildkite.com/mrc-ide/orderly" class="external-link"><img src="https://badge.buildkite.com/bc7993cd6960b205b32bd20f92d0d707c128e1a14bdb580f73.svg" alt="Build status"></a></li>
<li><a href="https://codecov.io/github/vimc/orderly?branch=master" class="external-link"><img src="https://codecov.io/github/vimc/orderly/coverage.svg?branch=master" alt="codecov.io"></a></li>
<li><a href="https://www.codefactor.io/repository/github/vimc/orderly" class="external-link"><img src="https://www.codefactor.io/repository/github/vimc/orderly/badge" alt="CodeFactor"></a></li>
<li><a href="https://cran.r-project.org/package=orderly" class="external-link"><img src="https://www.r-pkg.org/badges/version/orderly"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Rich FitzJohn, Robert Ashton, Alex Hill, Martin Eden, Wes Hinsley, Emma Russell, James Thompson.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
